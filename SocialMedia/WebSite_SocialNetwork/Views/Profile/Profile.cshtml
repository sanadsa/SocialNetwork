@model WebSite_SocialNetwork.Models.Profile
@{
    ViewBag.Title = "Profile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <h2>@Model.Identity.FirstName @Model.Identity.LastName</h2>
        @using (Html.BeginForm("ActiveFeed", "Profile", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
        {
            <input type="submit" value="Back To Feed" class="buttonT" />
        }
        <li role="presentation" class="active"><a href="#identity" aria-controls="identity" role="tab" data-toggle="tab">Identity</a></li>
        <li role="presentation"><a href="#following" aria-controls="following" role="tab" data-toggle="tab">Following</a></li>
        <li role="presentation"><a href="#followers" aria-controls="followers" role="tab" data-toggle="tab">Followers</a></li>
        <li role="presentation"><a href="#blocked" aria-controls="blocked" role="tab" data-toggle="tab">Blocked</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="identity">
            <h2>@ViewBag.Username</h2>
            <div>
                <label>Age</label>
                <p>@Model.Identity.Age</p>
            </div>
            <div>
                <label>Address</label>
                <p>@Model.Identity.Address</p>
            </div>
            <div>
                <label>Work Address</label>
                <p>@Model.Identity.WorkAddress</p>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="following">
            @if (Model.Following.Count == 0)
            {
                <h2>you are not following anyone!</h2>
            }
            else
            {
                foreach (var user in Model.Following)
                {
                    <div class="container">
                        <div class="row">
                            @using (Html.BeginForm("GetOtherProfile", "Profile", new { email = user.Email }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                            {
                                <input type="submit" value="@user.Username" class="buttonProfile" />
                            }
                            @*@using (Html.BeginForm("Unfollow", "Profile", new { emailToUnfollow = user.Email }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                            {
                                <input type="submit" value="UnFollow" />
                            }*@
                            @Html.Action("Unfollow", "Profile", new { emailToUnfollow = user.Email })
                        </div>
                    </div>
                }
            }
        </div>
        <div role="tabpanel" class="tab-pane" id="followers">
            @if (Model.Followers.Count == 0)
            {
                <h2>No Followers</h2>
            }
            else
            {
                foreach (var user in Model.Followers)
                {
                    <div class="container">
                        <div class="row">
                            @using (Html.BeginForm("GetOtherProfile", "Profile", new { email = user.Email }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                            {
                                <input type="submit" value="@user.Username" />
                            }
                        </div>
                    </div>

                }
            }
        </div>
        <div role="tabpanel" class="tab-pane" id="blocked">
            @if (Model.Following == null)
            {
                <h2>No Blocked Users</h2>
            }
            else
            {
                foreach (var user in Model.Blocking)
                {
                    <div class="container">
                        <div class="row">
                            @using (Html.BeginForm("GetOtherProfile", "Profile", new { email = user.Email }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                            {
                                <input type="submit" value="@user.Username" />
                            }
                            @using (Html.BeginForm("Unblock", "Profile", new { emailToUnblock = user.Email }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                            {
                                <input type="submit" value="@user.Username" />
                            }
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>